<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#141414">
    <title>English Study Tracker - 영어 공부 기록</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 프로필 선택 화면 -->
    <div id="profile-screen" class="screen active">
        <div class="container">
            <h1 class="logo">📺 English Study Tracker</h1>
            <p class="subtitle">누가 시청하시나요?</p>
            
            <div id="profile-list" class="profile-grid">
                <!-- 프로필들이 여기에 동적으로 추가됩니다 -->
            </div>
            
            <button class="btn-secondary" onclick="showAddProfile()">+ 프로필 추가</button>
        </div>
    </div>

    <!-- 메인 대시보드 화면 -->
    <div id="main-screen" class="screen">
        <nav class="navbar">
            <div class="nav-content">
                <h2 class="nav-logo">📺 English Study Tracker</h2>
                <div class="nav-right">
                    <span id="current-profile-name" class="profile-badge"></span>
                    <button class="btn-icon" onclick="showProfileScreen()">프로필 전환</button>
                </div>
            </div>
        </nav>

        <div class="container main-content">
            <div class="header-section">
                <h2>내 학습 기록</h2>
                <button class="btn-primary" onclick="showAddContent()">+ 새 콘텐츠 추가</button>
            </div>

            <div id="content-list" class="content-grid">
                <!-- 콘텐츠 카드들이 여기에 동적으로 추가됩니다 -->
            </div>

            <div id="empty-state" class="empty-state">
                <div class="empty-icon">🎬</div>
                <h3>아직 추가된 콘텐츠가 없습니다</h3>
                <p>영어 공부를 위한 미드나 영화를 추가해보세요!</p>
            </div>
        </div>
    </div>

    <!-- 콘텐츠 추가/수정 모달 -->
    <div id="content-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">새 콘텐츠 추가</h3>
                <button class="btn-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="content-id">
                
                <div class="form-group">
                    <label>제목</label>
                    <input type="text" id="content-title" placeholder="예: Friends Season 1">
                </div>

                <div class="form-group">
                    <label>타입</label>
                    <select id="content-type">
                        <option value="드라마">드라마</option>
                        <option value="영화">영화</option>
                        <option value="다큐멘터리">다큐멘터리</option>
                        <option value="유튜브">유튜브</option>
                        <option value="기타">기타</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>목표 회독 수</label>
                    <input type="number" id="target-rounds" min="1" value="5">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal()">취소</button>
                <button class="btn-primary" onclick="saveContent()">저장</button>
            </div>
        </div>
    </div>

    <!-- 회독 기록 모달 -->
    <div id="round-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="round-modal-title">회독 기록</h3>
                <button class="btn-close" onclick="closeRoundModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="round-content-id">
                
                <div class="rounds-container" id="rounds-list">
                    <!-- 회독 기록들이 여기에 표시됩니다 -->
                </div>

                <button class="btn-primary btn-block" onclick="addNewRound()">+ 새 회독 기록 추가</button>
            </div>
        </div>
    </div>

    <!-- 회독 상세 편집 모달 -->
    <div id="round-detail-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="round-detail-title">1회독 기록</h3>
                <button class="btn-close" onclick="closeRoundDetailModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="round-detail-content-id">
                <input type="hidden" id="round-detail-index">
                
                <div class="form-group">
                    <label>날짜</label>
                    <input type="date" id="round-date">
                </div>

                <div class="form-group">
                    <label>청취 이해도 (%)</label>
                    <input type="range" id="round-comprehension" min="0" max="100" value="50" oninput="updateComprehensionValue(this.value)">
                    <div class="range-value"><span id="comprehension-value">50</span>%</div>
                </div>

                <div class="form-group">
                    <label>학습 메모</label>
                    <textarea id="round-notes" rows="6" placeholder="이번 회독에서 느낀 점, 새로 들린 표현, 어려웠던 부분 등을 자유롭게 기록하세요..."></textarea>
                </div>

                <div class="form-group">
                    <label>주요 학습 포인트 (선택)</label>
                    <input type="text" id="round-keywords" placeholder="예: 속어, 관용표현, 발음 등 (쉼표로 구분)">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-danger" onclick="deleteRound()" id="delete-round-btn" style="margin-right: auto;">삭제</button>
                <button class="btn-secondary" onclick="closeRoundDetailModal()">취소</button>
                <button class="btn-primary" onclick="saveRoundDetail()">저장</button>
            </div>
        </div>
    </div>

    <!-- 프로필 추가 모달 -->
    <div id="profile-modal" class="modal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>새 프로필 추가</h3>
                <button class="btn-close" onclick="closeProfileModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>프로필 이름</label>
                    <input type="text" id="profile-name" placeholder="예: 엄마, 아빠, 언니" maxlength="15">
                </div>

                <div class="form-group">
                    <label>프로필 아이콘</label>
                    <div class="icon-grid">
                        <button class="icon-option" data-icon="😊" onclick="selectIcon('😊')">😊</button>
                        <button class="icon-option" data-icon="🎓" onclick="selectIcon('🎓')">🎓</button>
                        <button class="icon-option" data-icon="🌟" onclick="selectIcon('🌟')">🌟</button>
                        <button class="icon-option" data-icon="🎯" onclick="selectIcon('🎯')">🎯</button>
                        <button class="icon-option" data-icon="💪" onclick="selectIcon('💪')">💪</button>
                        <button class="icon-option" data-icon="🚀" onclick="selectIcon('🚀')">🚀</button>
                        <button class="icon-option" data-icon="🎨" onclick="selectIcon('🎨')">🎨</button>
                        <button class="icon-option" data-icon="🎵" onclick="selectIcon('🎵')">🎵</button>
                        <button class="icon-option" data-icon="📚" onclick="selectIcon('📚')">📚</button>
                        <button class="icon-option" data-icon="🌈" onclick="selectIcon('🌈')">🌈</button>
                        <button class="icon-option" data-icon="⭐" onclick="selectIcon('⭐')">⭐</button>
                        <button class="icon-option" data-icon="🎬" onclick="selectIcon('🎬')">🎬</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeProfileModal()">취소</button>
                <button class="btn-primary" onclick="saveProfile()">생성</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>